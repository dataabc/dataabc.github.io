<!doctype html> <html lang="zh-CN"> <head><link rel="manifest" href="/manifest.json"><meta name="generator" content="Hexo 3.9.0"><link rel="manifest" href="/manifest.json"> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="baidu-site-verification" content="MJCpR7aaLB"> <meta name="google-site-verification" content="mW-wjW1RPYjC4XidpT7-ykLpmbz8ToSH3bIVZK2aSI8"> <meta name="msvalidate.01" content="B304126A122F8E83839808D312235A91"> <meta name="360-site-verification" content> <meta name="viewport" content="width=device-width,initial-scale=1"> <meta name="keywords" content=",Python,微博爬虫,微博爬虫"> <meta name="description" content="分享计算机技术"> <link rel="shortcut icon" href="/img/icon.png"> <title> 用Python编写新浪微博爬虫 | 认知自我 </title> <link rel="canonical" href="/weibospider/"> <style>/*! minireset.css v0.0.3 | MIT License | github.com/jgthms/minireset.css */blockquote,body,dd,dl,dt,fieldset,figure,h1,h2,h3,h4,h5,h6,hr,html,iframe,legend,li,ol,p,pre,textarea,ul{margin:0;padding:0}h1,h2,h3,h4,h5,h6{font-size:100%;font-weight:400}button,input,select,textarea{margin:0}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}audio,embed,iframe,img,object,video{height:auto;max-width:100%}iframe{border:0}table{border-collapse:collapse;border-spacing:0}td,th{padding:0;text-align:left}</style> <style>.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{position:relative;min-height:1px;padding-right:15px;padding-left:15px;box-sizing:border-box}.col-xs-1,.col-xs-10,.col-xs-11,.col-xs-12,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9{float:left}.col-xs-12{width:100%}.col-xs-11{width:91.66666667%}.col-xs-10{width:83.33333333%}.col-xs-9{width:75%}.col-xs-8{width:66.66666667%}.col-xs-7{width:58.33333333%}.col-xs-6{width:50%}.col-xs-5{width:41.66666667%}.col-xs-4{width:33.33333333%}.col-xs-3{width:25%}.col-xs-2{width:16.66666667%}.col-xs-1{width:8.33333333%}.col-xs-pull-12{right:100%}.col-xs-pull-11{right:91.66666667%}.col-xs-pull-10{right:83.33333333%}.col-xs-pull-9{right:75%}.col-xs-pull-8{right:66.66666667%}.col-xs-pull-7{right:58.33333333%}.col-xs-pull-6{right:50%}.col-xs-pull-5{right:41.66666667%}.col-xs-pull-4{right:33.33333333%}.col-xs-pull-3{right:25%}.col-xs-pull-2{right:16.66666667%}.col-xs-pull-1{right:8.33333333%}.col-xs-pull-0{right:auto}.col-xs-push-12{left:100%}.col-xs-push-11{left:91.66666667%}.col-xs-push-10{left:83.33333333%}.col-xs-push-9{left:75%}.col-xs-push-8{left:66.66666667%}.col-xs-push-7{left:58.33333333%}.col-xs-push-6{left:50%}.col-xs-push-5{left:41.66666667%}.col-xs-push-4{left:33.33333333%}.col-xs-push-3{left:25%}.col-xs-push-2{left:16.66666667%}.col-xs-push-1{left:8.33333333%}.col-xs-push-0{left:auto}.col-xs-offset-12{margin-left:100%}.col-xs-offset-11{margin-left:91.66666667%}.col-xs-offset-10{margin-left:83.33333333%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-8{margin-left:66.66666667%}.col-xs-offset-7{margin-left:58.33333333%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-5{margin-left:41.66666667%}.col-xs-offset-4{margin-left:33.33333333%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-2{margin-left:16.66666667%}.col-xs-offset-1{margin-left:8.33333333%}.col-xs-offset-0{margin-left:0}@media (min-width:768px){.col-sm-1,.col-sm-10,.col-sm-11,.col-sm-12,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9{float:left}.col-sm-12{width:100%}.col-sm-11{width:91.66666667%}.col-sm-10{width:83.33333333%}.col-sm-9{width:75%}.col-sm-8{width:66.66666667%}.col-sm-7{width:58.33333333%}.col-sm-6{width:50%}.col-sm-5{width:41.66666667%}.col-sm-4{width:33.33333333%}.col-sm-3{width:25%}.col-sm-2{width:16.66666667%}.col-sm-1{width:8.33333333%}.col-sm-pull-12{right:100%}.col-sm-pull-11{right:91.66666667%}.col-sm-pull-10{right:83.33333333%}.col-sm-pull-9{right:75%}.col-sm-pull-8{right:66.66666667%}.col-sm-pull-7{right:58.33333333%}.col-sm-pull-6{right:50%}.col-sm-pull-5{right:41.66666667%}.col-sm-pull-4{right:33.33333333%}.col-sm-pull-3{right:25%}.col-sm-pull-2{right:16.66666667%}.col-sm-pull-1{right:8.33333333%}.col-sm-pull-0{right:auto}.col-sm-push-12{left:100%}.col-sm-push-11{left:91.66666667%}.col-sm-push-10{left:83.33333333%}.col-sm-push-9{left:75%}.col-sm-push-8{left:66.66666667%}.col-sm-push-7{left:58.33333333%}.col-sm-push-6{left:50%}.col-sm-push-5{left:41.66666667%}.col-sm-push-4{left:33.33333333%}.col-sm-push-3{left:25%}.col-sm-push-2{left:16.66666667%}.col-sm-push-1{left:8.33333333%}.col-sm-push-0{left:auto}.col-sm-offset-12{margin-left:100%}.col-sm-offset-11{margin-left:91.66666667%}.col-sm-offset-10{margin-left:83.33333333%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-8{margin-left:66.66666667%}.col-sm-offset-7{margin-left:58.33333333%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-5{margin-left:41.66666667%}.col-sm-offset-4{margin-left:33.33333333%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-2{margin-left:16.66666667%}.col-sm-offset-1{margin-left:8.33333333%}.col-sm-offset-0{margin-left:0}}@media (min-width:992px){.col-md-1,.col-md-10,.col-md-11,.col-md-12,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9{float:left}.col-md-12{width:100%}.col-md-11{width:91.66666667%}.col-md-10{width:83.33333333%}.col-md-9{width:75%}.col-md-8{width:66.66666667%}.col-md-7{width:58.33333333%}.col-md-6{width:50%}.col-md-5{width:41.66666667%}.col-md-4{width:33.33333333%}.col-md-3{width:25%}.col-md-2{width:16.66666667%}.col-md-1{width:8.33333333%}.col-md-pull-12{right:100%}.col-md-pull-11{right:91.66666667%}.col-md-pull-10{right:83.33333333%}.col-md-pull-9{right:75%}.col-md-pull-8{right:66.66666667%}.col-md-pull-7{right:58.33333333%}.col-md-pull-6{right:50%}.col-md-pull-5{right:41.66666667%}.col-md-pull-4{right:33.33333333%}.col-md-pull-3{right:25%}.col-md-pull-2{right:16.66666667%}.col-md-pull-1{right:8.33333333%}.col-md-pull-0{right:auto}.col-md-push-12{left:100%}.col-md-push-11{left:91.66666667%}.col-md-push-10{left:83.33333333%}.col-md-push-9{left:75%}.col-md-push-8{left:66.66666667%}.col-md-push-7{left:58.33333333%}.col-md-push-6{left:50%}.col-md-push-5{left:41.66666667%}.col-md-push-4{left:33.33333333%}.col-md-push-3{left:25%}.col-md-push-2{left:16.66666667%}.col-md-push-1{left:8.33333333%}.col-md-push-0{left:auto}.col-md-offset-12{margin-left:100%}.col-md-offset-11{margin-left:91.66666667%}.col-md-offset-10{margin-left:83.33333333%}.col-md-offset-9{margin-left:75%}.col-md-offset-8{margin-left:66.66666667%}.col-md-offset-7{margin-left:58.33333333%}.col-md-offset-6{margin-left:50%}.col-md-offset-5{margin-left:41.66666667%}.col-md-offset-4{margin-left:33.33333333%}.col-md-offset-3{margin-left:25%}.col-md-offset-2{margin-left:16.66666667%}.col-md-offset-1{margin-left:8.33333333%}.col-md-offset-0{margin-left:0}}@media (min-width:1200px){.col-lg-1,.col-lg-10,.col-lg-11,.col-lg-12,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9{float:left}.col-lg-12{width:100%}.col-lg-11{width:91.66666667%}.col-lg-10{width:83.33333333%}.col-lg-9{width:75%}.col-lg-8{width:66.66666667%}.col-lg-7{width:58.33333333%}.col-lg-6{width:50%}.col-lg-5{width:41.66666667%}.col-lg-4{width:33.33333333%}.col-lg-3{width:25%}.col-lg-2{width:16.66666667%}.col-lg-1{width:8.33333333%}.col-lg-pull-12{right:100%}.col-lg-pull-11{right:91.66666667%}.col-lg-pull-10{right:83.33333333%}.col-lg-pull-9{right:75%}.col-lg-pull-8{right:66.66666667%}.col-lg-pull-7{right:58.33333333%}.col-lg-pull-6{right:50%}.col-lg-pull-5{right:41.66666667%}.col-lg-pull-4{right:33.33333333%}.col-lg-pull-3{right:25%}.col-lg-pull-2{right:16.66666667%}.col-lg-pull-1{right:8.33333333%}.col-lg-pull-0{right:auto}.col-lg-push-12{left:100%}.col-lg-push-11{left:91.66666667%}.col-lg-push-10{left:83.33333333%}.col-lg-push-9{left:75%}.col-lg-push-8{left:66.66666667%}.col-lg-push-7{left:58.33333333%}.col-lg-push-6{left:50%}.col-lg-push-5{left:41.66666667%}.col-lg-push-4{left:33.33333333%}.col-lg-push-3{left:25%}.col-lg-push-2{left:16.66666667%}.col-lg-push-1{left:8.33333333%}.col-lg-push-0{left:auto}.col-lg-offset-12{margin-left:100%}.col-lg-offset-11{margin-left:91.66666667%}.col-lg-offset-10{margin-left:83.33333333%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-8{margin-left:66.66666667%}.col-lg-offset-7{margin-left:58.33333333%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-5{margin-left:41.66666667%}.col-lg-offset-4{margin-left:33.33333333%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-2{margin-left:16.66666667%}.col-lg-offset-1{margin-left:8.33333333%}.col-lg-offset-0{margin-left:0}}@media (max-width:767px){.hidden-xs{display:none!important}}@media (min-width:768px) and (max-width:991px){.hidden-sm{display:none!important}}@media (min-width:992px) and (max-width:1199px){.hidden-md{display:none!important}}@media (min-width:1200px){.hidden-lg{display:none!important}}</style> <style>@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,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) format('woff')}.markdown-it{text-size-adjust:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;line-height:1.8;color:#333;font-family:Arial,'Hiragino Sans GB',冬青黑,'Microsoft YaHei',微软雅黑,SimSun,宋体,Helvetica,Tahoma,'Arial sans-serif';-webkit-font-smoothing:antialiased;font-size:16px;word-wrap:break-word}@media (max-width:767px){.markdown-it{font-size:14px}}.markdown-it *{box-sizing:border-box}.markdown-it::before{display:table;content:""}.markdown-it::after{display:table;clear:both;content:""}.markdown-it>:first-child{margin-top:0!important}.markdown-it>:last-child{margin-bottom:0!important}.markdown-it [type=checkbox],.markdown-it dl{padding:0}.markdown-it blockquote,.markdown-it details,.markdown-it dl,.markdown-it ol,.markdown-it p,.markdown-it pre,.markdown-it table,.markdown-it ul{margin-top:0;margin-bottom:5px}.markdown-it code,.markdown-it kbd,.markdown-it pre{font-family:monospace,monospace;font-size:1em}.markdown-it a{color:#108ee9;text-decoration:none;background-color:transparent;-webkit-text-decoration-skip:objects}.markdown-it summary{cursor:pointer;font-weight:700}.markdown-it a:active,.markdown-it a:focus,.markdown-it a:hover,.markdown-it summary:active,.markdown-it summary:focus,.markdown-it summary:hover{outline-width:0}.markdown-it details{padding:5px 10px;border:1px solid #e3e3e3;border-bottom-color:#e0e0e0;border-right-color:#ececec;background-color:#f0f8ff;box-shadow:1px 2px 1px rgba(0,0,0,.072);-webkit-box-shadow:1px 2px 1px rgba(0,0,0,.072)}.markdown-it details p{margin-bottom:0}.markdown-it a:hover{text-decoration:none;color:#108ee9}.markdown-it a:not([href]){color:inherit;text-decoration:none}.markdown-it blockquote{margin:1em 0;padding:.5em 1em;color:#666;border-left:.25em solid #108ee9;background-color:#f0f8ff;overflow:auto}.markdown-it blockquote>:first-child{margin-top:0}.markdown-it blockquote>:last-child{margin-bottom:0}.markdown-it code{padding:.2em 0;margin:0;background-color:rgba(27,31,35,.05);border-radius:3px;font-family:SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;color:#c7254e}.markdown-it code::after,.markdown-it code::before{letter-spacing:-.2em;content:"\00a0"}.markdown-it p>code{color:#c7254e}.markdown-it dd{margin-left:0}.markdown-it dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-it dl dd{padding:0 16px;margin-bottom:16px}.markdown-it h1,.markdown-it h2,.markdown-it h3,.markdown-it h4,.markdown-it h5,.markdown-it h6{margin-top:-55px;margin-bottom:5px;font-weight:600;padding-top:60px}.markdown-it h1{margin-top:0;padding-top:0;margin-bottom:20px;font-size:1.8em;font-weight:300;border-bottom:1px solid #eaecef}.markdown-it h2{font-size:1.5em}.markdown-it h3{font-size:1.25em}.markdown-it h4{font-size:1em}.markdown-it h5{font-size:.875em}.markdown-it h6{font-size:.85em;color:#6a737d}.markdown-it hr{padding:0;height:0;margin:10px 0;overflow:hidden;background:0 0;border:0;border-bottom:1px solid #dfe2e5;width:100%}.markdown-it hr::before{display:table;content:""}.markdown-it hr::after{display:table;clear:both;content:""}.markdown-it img{border-style:none;max-width:100%;box-sizing:content-box;background-color:#fff;margin-left:50%;transform:translate(-50%,0);-webkit-transform:translate(-50%,0)}.markdown-it input{line-height:inherit;font:inherit;margin:0;overflow:visible}.markdown-it kbd{line-height:10px;display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,"Liberation Mono",Menlo,Courier,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fcfcfc;border:solid 1px #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}.markdown-it pre{word-wrap:normal;font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;padding:16px;overflow:auto;line-height:1.2;background-color:#f6f8fa;border-radius:3px;margin-top:10px}.markdown-it pre code{padding:0;margin:0;font-size:.85em;word-break:normal;white-space:pre;background:0 0;border:0;display:inline;overflow:visible;line-height:inherit;word-wrap:normal}.markdown-it pre code::after,.markdown-it pre code::before{content:normal}.markdown-it strong{font-weight:600}.markdown-it svg:not(:root){overflow:hidden}.markdown-it table{border-spacing:0;border-collapse:collapse;display:block;width:100%;overflow:auto}.markdown-it table thead th{background-color:#f6f8fa}.markdown-it table th{font-weight:600}.markdown-it table td,.markdown-it table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-it table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-it table tr:nth-child(2n){background-color:#f6f8fa}.markdown-it ol,.markdown-it ul{padding-left:1em}.markdown-it ol ol,.markdown-it ul ol{list-style-type:lower-roman}.markdown-it ol ol ol,.markdown-it ol ul ol,.markdown-it ul ol ol,.markdown-it ul ul ol{list-style-type:lower-alpha}.markdown-it ol ol,.markdown-it ol ul,.markdown-it ul ol,.markdown-it ul ul{margin-top:0;margin-bottom:0}.markdown-it li>p{margin-top:16px}</style> <style>.post-container .highlight,.post-container pre{overflow:auto;margin:20px 0;padding:15px;font-size:13px;color:#c5c8c6;background:#1d1f21;line-height:$line-height-code-block}.post-container pre code{padding:0;color:#c5c8c6;background:0 0;text-shadow:none}.post-container .highlight pre{border:none;margin:0;padding:1px}.post-container .highlight table{margin:0;width:auto;border:none}.post-container .highlight td{border:none!important;padding:0}.post-container .highlight figcaption{zoom:1;font-size:1em;color:#c5c8c6;line-height:1em;margin-bottom:1em}.post-container .highlight figcaption:after,.post-container .highlight figcaption:before{content:"";display:table}.post-container .highlight figcaption:after{clear:both}.post-container .highlight figcaption a{float:right;color:#c5c8c6}.post-container .highlight figcaption a:hover{border-bottom-color:#c5c8c6}.post-container .highlight .gutter pre{color:#666;text-align:right;padding-right:20px}.post-container .highlight .line{height:20px}.post-container .gist table{width:auto}.post-container .gist table td{border:none}.post-container pre .comment{color:#969896}.post-container pre .attribute,.post-container pre .css .class,.post-container pre .css .id,.post-container pre .css .pseudo,.post-container pre .html .doctype,.post-container pre .regexp,.post-container pre .ruby .constant,.post-container pre .tag,.post-container pre .variable,.post-container pre .xml .doctype,.post-container pre .xml .pi,.post-container pre .xml .tag .title{color:#c66}.post-container pre .built_in,.post-container pre .command,.post-container pre .constant,.post-container pre .literal,.post-container pre .number,.post-container pre .params,.post-container pre .preprocessor{color:#de935f}.post-container pre .css .rules .attribute,.post-container pre .formula,.post-container pre .header,.post-container pre .inheritance,.post-container pre .number,.post-container pre .ruby .class .title,.post-container pre .ruby .symbol,.post-container pre .special,.post-container pre .string,.post-container pre .value,.post-container pre .xml .cdata{color:#b5bd68}.post-container pre .css .hexcolor,.post-container pre .title{color:#8abeb7}.post-container pre .coffeescript .title,.post-container pre .function,.post-container pre .javascript .title,.post-container pre .perl .sub,.post-container pre .python .decorator,.post-container pre .python .title,.post-container pre .ruby .function .title,.post-container pre .ruby .title .keyword{color:#81a2be}.post-container pre .javascript .function,.post-container pre .keyword{color:#b294bb}</style> <style>body{font-family:"-apple-system","Open Sans",HelveticaNeue-Light,"Helvetica Neue Light","Helvetica Neue",Helvetica,Arial,sans-serif}a{text-decoration:none;color:#333}.text-center{text-align:center!important}.text-left{text-align:left!important}.text-right{text-align:right!important}.float-left{float:left!important}.float-right{float:right!important}.no-text-decoration{text-decoration:none!important}.padding-0{padding:0!important}.hide{display:none!important}body{background-color:#fff}main{display:flex;justify-content:space-between}main>div{overflow:hidden}.gkt-header-container,.main-container{margin-right:auto;margin-left:auto;padding-top:20px;padding-bottom:30px}.main-container{background:#fff}.post-list{line-height:2.8em;border-left:4px solid #f9f9f9}@media (min-width:768px){.gkt-header-container,.main-container{width:750px}.post-list{margin-left:30px}}@media (min-width:992px){.gkt-header-container,.main-container{width:990px}}@media (min-width:1200px){.gkt-header-container,.main-container{width:100%;max-width:1380px}}.post-list ul{padding-left:0!important}.post-list li{list-style-type:none;position:relative;padding-left:20px}.post-list a{text-decoration:none}.post-list li:before{position:absolute;top:50%;left:-2px;width:10px;height:10px;margin-top:-9px;margin-left:-5px;content:' ';border-radius:50%;background-color:#ddd}.post-list .post-item-parent{margin-top:20px}.post-list a{color:#000}.post-item-color-0:before{background:#1abc9c!important}.post-item-color-1:before{background:#3498db!important}.post-item-color-2:before{background:#9b59b6!important}.post-item-color-3:before{background:#e67e22!important}.post-item-color-4:before{background:#e74c3c!important}.post-list .post-text-parent{font-size:20px;font-weight:700;font-weight:700;color:#222}.post-list .post-item-title{font-size:16px;transition-duration:.5s;color:#333;vertical-align:middle;overflow:hidden}.post-list .post-item-title:hover{color:#108ee9}.post-list .post-item-date{margin-left:2px;color:hsla(0,0%,71%,.9);font-size:.85em}.post-preview{width:100%;margin-bottom:10px;box-sizing:border-box;display:flex;flex-direction:row;height:max-content}.post-preview .text-gray{color:#999!important}.post-preview .post-info{flex:1;padding-left:20px}.post-preview .post-img{width:100px;background-size:contain;background-repeat:no-repeat;background-position:center}.post-preview .post-info-center{position:relative;top:50%;left:50%;transform:translate(-50%,-50%)}.post-preview .post-info a{cursor:pointer;text-decoration:none}.post-preview .post-info .title{color:#101010;font-size:1.2em}@media (min-width:768px){.post-preview .post-img{width:120px}.post-preview .post-info{padding-right:30px}}.markdown-it .highlight table tr{background-color:transparent;border-top:none}</style> <script>window.globalAddScript=function(e,o,t){var n=document.createElement("script");n.src=e,o&&(n.onload=o),t&&(n.onerror=t),document.body.appendChild(n)},window.globalAddCss=function(e){var o=document.createElement("link");o.rel="stylesheet",o.href=e,document.body.appendChild(o)},window.getPosition=function(e){for(var o=0,t=0;e;)o+=e.offsetLeft-e.scrollLeft+e.clientLeft,t+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:o,y:t}};</script> <link rel="apple-touch-icon" href="/img/pwa/apple-touch-icon.png"> <meta name="apple-mobile-web-app-status-bar-style" content="#0C3C26"> <meta name="theme-color" content="#0C3C26"> </head> <body> <style>.gkt-header{background-color:#0c3c26;position:fixed;top:0;z-index:9999}.gkt-header>div{height:88px;padding:18px 16px 58px 16px}.gkt-header-title{font-size:18px;font-weight:700;color:#fff}.gkt-header-nav li{display:inline-block;padding:13px 6px;vertical-align:middle}.gkt-header-nav ul{font-weight:700;list-style:none}.gkt-header-nav a{font-size:18px;color:#fff}.gkt-cate-name.active a,.gkt-header a:hover{color:#fff}::after,::before,span{position:relative}.flex div{background-color:#0c3c26}.flex.centered div:last-child span{top:calc(((-1em / .9) + 1ex)/ 2)}.block_container>div{display:inline-block}.gkt-header-nav{float:right}.text-opacity{opacity:.4;font-weight:400}.flex centered>span,.text-opacity>span{display:block}</style> <header class="gkt-header col-xs-12 padding-0"> <div id="gkt-nav" class="gkt-header-container"> <a href="/" class="gkt-header-title float-left"> <div class="block_container"> <div class="flex centered"> <div><span> <font size="7">cognize</font> </span></div> </div> <div class="hidden-xs text-opacity"> <span>Try not to become a man of success,</span> <span>but rather try to become a man of value.</span> </div> </div> </a> <nav class="gkt-header-nav text-right"> <ul> <li class="hidden-xs"><a href="/">主页</a></li> <li><a href="/archives/">归档</a></li> <li><a href="/about/">关于</a></li> </ul> </nav> </div> </header> <div style="height:88px"></div> <div class="main-container markdown-it"> <main class="col-xs-12 padding-0"> <style>.headerlink,:target::before{content:"";display:block;height:16px}.sidebar{position:static;float:left;font-size:14px}.sidebar-left{border-right:1px solid #eaecef;margin-right:10px}.sidebar-left,.sidebar-left>div{width:280px}.sidebar-right,.sidebar-right>div{width:260px}.sidebar-wrapper li{list-style-type:square}.sidebar-wrapper a{color:rgba(0,0,0,.9);font-size:14px}.sidebar-active{color:#108ee9!important;font-weight:700}.sidebar-wrapper section{margin-bottom:10px;margin-left:10px}.sidebar-fixed{position:fixed;top:46px;margin-top:0;max-height:81%;z-index:1}</style> <style>.post-container{overflow:hidden}.post-item-date{margin-left:10px;color:hsla(0,0%,71%,.9);font-size:.85em}.series_links{border:1px solid #eaecef;padding:15px;background-color:#fff8dc;margin-bottom:20px;border-radius:5px}</style> <aside class="sidebar sidebar-left hidden-xs hidden-sm"> <div></div> <div class="sidebar-wrapper" style="top:-60px"> <section><style>.gkt-summary{border:1px solid #ddd;border-radius:3px;padding:5px;width:240px}.gkt-summary nav{overflow:hidden}.gkt-summary nav a{display:inline-block;text-align:center;color:#333;font-size:12px}.gkt-summary nav span{display:block}.gkt-summary nav .middle{border-left:1px solid #eaecef;border-right:1px solid #eaecef}.gkt-summary .number{font-weight:700}.gkt-summary .link-list{margin-top:5px;margin-bottom:-5px;padding-top:7px;border-top:1px dashed #999;display:flex}.gkt-summary .link-list a{flex:1}.gkt-summary .link-list img{width:25px;height:25px}</style> <div class="gkt-summary"> <nav> <a href="/" class="col-xs-4"> <number class="number">76</number><span>文章</span> </a> <a href="/series" class="col-xs-4 middle"> <number class="number">0</number><span>专题</span> </a> <a href="/tags" class="col-xs-4"> <number class="number">27</number><span>标签</span> </a> </nav> <div class="link-list"> <a href="https://github.com/dataabc" rel="external nofollow noopener noreferrer" target="_blank"><img src="/img/github.png"></a> <a href="https://www.v2ex.com/member/Chilly" rel="external nofollow noopener noreferrer" target="_blank"><img src="/img/v2ex.png"></a> <a href="https://twitter.com/imchenlei" rel="external nofollow noopener noreferrer" target="_blank"><img src="/img/twitter.png"></a> </div> </div></section> <section> <h3>最近的文章</h3> <ul> <li> <a href="/doctokindle/">向kindle推送doc文档</a> </li> <li> <a href="/payspotify/">支付Spotify教程</a> </li> <li> <a href="/djangopic/">Django上传并显示图片</a> </li> <li> <a href="/weibospider/">用Python编写新浪微博爬虫</a> </li> <li> <a href="/matplotlibZn/">解决matplotlib中文显示问题</a> </li> <li> <a href="/r-outer/">R语言之outer函数</a> </li> <li> <a href="/swirl/">利用swirl包学习R语言</a> </li> <li> <a href="/r-equal/">R语言中判断两个对象是否相等</a> </li> <li> <a href="/msysgiterror/">解决hexo一个奇怪的错误</a> </li> <li> <a href="/win10Gvim/">解决gvim在win10下乱码的问题</a> </li> </ul> </section> </div> </aside> <div class="col-xs-12"> <article class="post-container"> <h1> 用Python编写新浪微博爬虫 </h1> <p>最近用Python写了一个新浪微博的爬虫，可以用来爬取用户所发的<strong>微博数</strong>、<strong>关注数</strong>、<strong>粉丝数</strong>、<strong>微博内容</strong>以及每条微博对应的<strong>发布时间</strong>、<strong>转发数</strong>、<strong>点赞数</strong>和<strong>评论数</strong>等信息。<a id="more"></a>爬虫源代码已经传到了我的<a href="https://github.com/dataabc/weiboSpider" title="Github" rel="external nofollow noopener noreferrer" target="_blank">Github</a>里，地址：<a href="https://github.com/dataabc/weiboSpider" rel="external nofollow noopener noreferrer" target="_blank">https://github.com/dataabc/weiboSpider</a>，欢迎关注,当然不关注也没关系。<br><br><br><strong>以下为2019/08/15更新</strong><br>又写了一个<a href="https://github.com/dataabc/weibo-crawler" rel="external nofollow noopener noreferrer" target="_blank"><strong>免cookie版</strong></a>，二者功能类似，目前免cookie版功能更多一些。多了爬取微博话题(即两个#中的内容)和爬取@微博用户功能，用户的信息也爬取的更多。下面以免cookie版为例进行说明。</p> <h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>爬取新浪微博信息，并写入csv文件，文件名为目标用户id加”.csv”的形式，同时还会下载该微博原始图片(可选)。<br><br>以爬取迪丽热巴的微博为例，她的微博昵称为”Dear-迪丽热巴”，id为1669879400(后面会讲如何获取用户id)。我们选择爬取她的全部微博。程序会自动生成一个weibo文件夹，我们以后爬取的所有微博都被存储在weibo文件夹里。然后程序在该文件夹下生成一个名为”Dear-迪丽热巴”的文件夹，迪丽热巴的所有微博爬取结果都在这里。”Dear-迪丽热巴”文件夹里包含一个csv文件和一个img文件夹，img文件夹用来存储下载到的图片。<br><br>csv文件结果如下所示：<br><img src="/img/loading.png" data-original="https://picture.cognize.me/cognize/github/weibo-crawler/weibo_csv.png" alt><em>1669879400.csv</em><br><br>本csv文件是爬取“全部微博”(原创微博+转发微博)的结果文件。因为迪丽热巴很多微博本身都没有图片、发布工具、位置、话题和@用户等信息，所以当这些内容没有时对应位置为空。”是否原创”列用来标记是否为原创微博，<br>当为转发微博时，文件中还包含转发微博的信息。为了简便起见，姑且将转发微博中被转发的原始微博称为<strong>源微博</strong>，它的用户id、昵称、微博id等都在名称前加上源字，以便与目标用户自己发的微博区分。对于转发微博，程序除了获取用户原创部分的信息，还会获取<strong>源用户id</strong>、<strong>源用户昵称</strong>、<strong>源微博id</strong>、<strong>源微博正文</strong>、<strong>源微博原始图片url</strong>、<strong>源微博位置</strong>、<strong>源微博日期</strong>、<strong>源微博工具</strong>、<strong>源微博点赞数</strong>、<strong>源微博评论数</strong>、<strong>源微博转发数</strong>、<strong>源微博话题</strong>、<strong>源微博@用户</strong>等信息。原创微博因为没有这些转发信息，所以对应位置为空。若爬取的是”全部<strong>原创</strong>微博”，则csv文件中不会包含”是否原创”及其之后的转发属性列；<br><br>下载的图片如下所示：<br><img src="/img/loading.png" data-original="https://picture.cognize.me/cognize/github/weibo-crawler/img.png" alt><em>img文件夹</em><br><br>本次下载了788张图片，大小一共1.21GB，包括她原创微博中的所有图片。图片名为yyyymmdd+微博id的形式，若某条微博存在多张图片，则图片名中还会包括它在微博图片中的序号。若某图片下载失败，程序则会以“weibo_id:pic_url”的形式将出错微博id和图片url写入同文件夹下的not_downloaded.txt里；若图片全部下载成功则不会生成not_downloaded.txt；<br><br>下载的视频如下所示：<br><img src="/img/loading.png" data-original="https://picture.cognize.me/cognize/github/weibo-crawler/video.png" alt><em>video文件夹</em><br><br>本次下载了66个视频，是她原创微博中的视频，视频名为yyyymmdd+微博id的形式。有三个视频因为网络原因下载失败，程序将它们的微博id和视频url分别以“weibo_id:video_url”的形式写到了同文件夹下的not_downloaded.txt里。</p> <h2 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h2><p>用户id，例如新浪微博昵称为”Dear-迪丽热巴”的id为”1669879400”</p> <h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p><strong>用户信息</strong><br></p> <ul> <li>用户id：微博用户id，为一串数字形式</li> <li>用户昵称：微博用户昵称，如”Dear-迪丽热巴”</li> <li>性别：微博用户性别</li> <li>微博数：用户的全部微博数（转发微博+原创微博）</li> <li>粉丝数：用户的粉丝数</li> <li>关注数：用户关注的微博数量</li> <li>简介：用户简介</li> <li>主页地址：微博移动版主页url</li> <li>头像url：用户头像url</li> <li>高清头像url：用户高清头像url</li> <li>微博等级：用户微博等级</li> <li>会员等级：微博会员用户等级，普通用户该等级为0</li> <li>是否认证：用户是否认证，为布尔类型</li> <li>认证类型：用户认证类型，如个人认证、企业认证、政府认证等</li> <li>认证信息：为认证用户特有，用户信息栏显示的认证信息</li> </ul> <hr> <p><strong>微博信息</strong><br></p> <ul> <li>微博id：微博的id，为一串数字形式</li> <li>微博内容：微博正文</li> <li>原始图片url：原创微博图片和转发微博转发理由中图片的url，若某条微博存在多张图片，每个url以英文逗号分隔，若没有图片则值为’’</li> <li>微博发布位置：位置微博中的发布位置</li> <li>微博发布时间：微博发布时的时间，精确到天</li> <li>点赞数：微博被赞的数量</li> <li>转发数：微博被转发的数量</li> <li>评论数：微博被评论的数量</li> <li>微博发布工具：微博的发布工具，如iPhone客户端、HUAWEI Mate 20 Pro等，若没有则值为’’</li> <li>话题：微博话题，即两个#中的内容，若存在多个话题，每个url以英文逗号分隔，若没有则值为’’</li> <li>@用户：微博@的用户，若存在多个@用户，每个url以英文逗号分隔，若没有则值为’’</li> <li>原始微博：为转发微博所特有，是转发微博中那条被转发的微博，存储为字典形式，包含了上述微博信息中的所有内容，如微博id、微博内容等等</li> <li>结果文件：保存在当前目录weibo文件夹下以用户昵称为名的文件夹里，名字为”user_id.csv”形式</li> <li>微博图片：原创微博中的图片，保存在以用户昵称为名的文件夹下的img文件夹里</li> <li>微博视频：原创微博中的视频，保存在以用户昵称为名的文件夹下的video文件夹里</li> </ul> <h2 id="运行环境"><a href="#运行环境" class="headerlink" title="运行环境"></a>运行环境</h2><ul> <li>开发语言：python2/python3</li> <li>系统： Windows/Linux/macOS</li> </ul> <h2 id="使用说明"><a href="#使用说明" class="headerlink" title="使用说明"></a>使用说明</h2><h3 id="1-下载脚本"><a href="#1-下载脚本" class="headerlink" title="1.下载脚本"></a>1.下载脚本</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> https://github.com/dataabc/weibo-crawler.git</span><br></pre></td></tr></table></figure> <p>运行上述命令，将本项目下载到当前目录，如果下载成功当前目录会出现一个名为”weibo-crawler”的文件夹；</p> <h3 id="2-设置user-id"><a href="#2-设置user-id" class="headerlink" title="2.设置user_id"></a>2.设置user_id</h3><p>打开weibo-crawler文件夹下的”<strong>weibo.py</strong>“文件，将<strong>user_id</strong>替换成想要爬取的微博的user_id，后面会详细讲解如何获取user_id;</p> <h3 id="3-安装依赖"><a href="#3-安装依赖" class="headerlink" title="3.安装依赖"></a>3.安装依赖</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure> <h3 id="4-运行脚本"><a href="#4-运行脚本" class="headerlink" title="4.运行脚本"></a>4.运行脚本</h3><p>大家可以根据自己的运行环境选择运行方式，Linux可以通过</p> <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python weibo.py</span><br></pre></td></tr></table></figure> <p>运行;</p> <h3 id="5-按需求修改脚本（可选）"><a href="#5-按需求修改脚本（可选）" class="headerlink" title="5.按需求修改脚本（可选）"></a>5.按需求修改脚本（可选）</h3><p>本脚本是一个Weibo类，用户可以按照自己的需求调用Weibo类。<br>例如用户可以直接在”weibo.py”文件中调用Weibo类，具体调用代码示例如下：</p> <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">user_id = <span class="number">1669879400</span></span><br><span class="line">filter = <span class="number">1</span></span><br><span class="line">pic_download = <span class="number">1</span></span><br><span class="line">wb = Weibo(user_id, filter, pic_download) <span class="comment">#调用Weibo类，创建微博实例wb</span></span><br><span class="line">wb.start()  <span class="comment">#爬取微博信息</span></span><br></pre></td></tr></table></figure> <p>user_id可以改成任意合法的用户id；filter默认值为0，表示爬取所有微博信息（转发微博+原创微博），为1表示只爬取用户的所有原创微博；pic_download默认值为0，代表不下载微博原始图片，1代表下载；wb是Weibo类的一个实例，也可以是其它名字，只要符合python的命名规范即可；通过执行wb.start() 完成了微博的爬取工作。在上述代码执行后，我们可以得到很多信息：<br><br><strong>wb.user</strong>：存储目标微博用户信息；<br><br>wb.user包含爬取到的微博用户信息，如<strong>用户id</strong>、<strong>用户昵称</strong>、<strong>性别</strong>、<strong>微博数</strong>、<strong>粉丝数</strong>、<strong>关注数</strong>、<strong>简介</strong>、<strong>主页地址</strong>、<strong>头像url</strong>、<strong>高清头像url</strong>、<strong>微博等级</strong>、<strong>会员等级</strong>、<strong>是否认证</strong>、<strong>认证类型</strong>、<strong>认证信息</strong>等，大家可以点击”详情”查看具体用法。</p> <details> <summary>详情</summary> <p><strong>id</strong>：微博用户id，取值方式为wb.user[‘id’],由一串数字组成；<br><br><strong>screen_name</strong>：微博用户昵称，取值方式为wb.user[‘screen_name’]；<br><br><strong>gender</strong>：微博用户性别，取值方式为wb.user[‘gender’]，取值为f或m，分别代表女和男；<br><br><strong>statuses_count</strong>：微博数，取值方式为wb.user[‘statuses_count’]；<br><br><strong>followers_count</strong>：微博粉丝数，取值方式为wb.user[‘followers_count’]；<br><br><strong>follow_count</strong>：微博关注数，取值方式为wb.user[‘follow_count’]；<br><br><strong>description</strong>：微博简介，取值方式为wb.user[‘description’]；<br><br><strong>profile_url</strong>：微博主页，取值方式为wb.user[‘profile_url’]; <br><br><strong>profile_image_url</strong>：微博头像url，取值方式为wb.user[‘profile_image_url’]；<br><br><strong>avatar_hd</strong>：微博高清头像url，取值方式为wb.user[‘avatar_hd’]；<br><br><strong>urank</strong>：微博等级，取值方式为wb.user[‘urank’]；<br><br><strong>mbrank</strong>：微博会员等级，取值方式为wb.user[‘mbrank’]，普通用户会员等级为0；<br><br><strong>verified</strong>：微博是否认证，取值方式为wb.user[‘verified’]，取值为true和false；<br><br><strong>verified_type</strong>：微博认证类型，取值方式为wb.user[‘verified_type’]，没有认证值为-1，个人认证值为0，企业认证值为2，政府认证值为3，这些类型仅是个人猜测，应该不全，大家可以根据实际情况判断；<br><br><strong>verified_reason</strong>：微博认证信息，取值方式为wb.user[‘verified_reason’]，只有认证用户拥有此属性。<br></p> </details> <p><strong>wb.weibo</strong>：存储爬取到的所有微博信息；<br><br>wb.weibo包含爬取到的所有微博信息，如<strong>微博id</strong>、<strong>正文</strong>、<strong>原始图片url</strong>、<strong>视频url</strong>、<strong>位置</strong>、<strong>日期</strong>、<strong>发布工具</strong>、<strong>点赞数</strong>、<strong>转发数</strong>、<strong>评论数</strong>、<strong>话题</strong>、<strong>@用户</strong>等。如果爬的是全部微博(原创+转发)，除上述信息之外，还包含<strong>原始用户id</strong>、<strong>原始用户昵称</strong>、<strong>原始微博id</strong>、<strong>原始微博正文</strong>、<strong>原始微博原始图片url</strong>、<strong>原始微博位置</strong>、<strong>原始微博日期</strong>、<strong>原始微博工具</strong>、<strong>原始微博点赞数</strong>、<strong>原始微博评论数</strong>、<strong>原始微博转发数</strong>、<strong>原始微博话题</strong>、<strong>原始微博@用户</strong>等信息。wb.weibo是一个列表，包含了爬取的所有微博信息。wb.weibo[0]为爬取的第一条微博，wb.weibo[1]为爬取的第二条微博，以此类推。当filter=1时，wb.weibo[0]为爬取的第一条<strong>原创</strong>微博，以此类推。wb.weibo[0][‘id’]为第一条微博的id，wb.weibo[0][‘text’]为第一条微博的正文，wb.weibo[0][‘created_at’]为第一条微博的发布时间，还有其它很多信息不在赘述，大家可以点击下面的”详情”查看具体用法。</p> <details> <summary>详情</summary> <p><strong>user_id</strong>：存储微博用户id。如wb.weibo[0][‘user_id’]为最新一条微博的用户id；<br><br><strong>screen_name</strong>：存储微博昵称。如wb.weibo[0][‘screen_name’]为最新一条微博的昵称；<br><br><strong>id</strong>：存储微博id。如wb.weibo[0][‘id’]为最新一条微博的id；<br><br><strong>text</strong>：存储微博正文。如wb.weibo[0][‘text’]为最新一条微博的正文；<br><br><strong>pics</strong>：存储原创微博的原始图片url。如wb.weibo[0][‘pics’]为最新一条微博的原始图片url，若该条微博有多张图片，则存储多个url，以英文逗号分割；若该微博没有图片，则值为’’；<br><br><strong>video_url</strong>：存储原创微博的视频url。如wb.weibo[0][‘video_url’]为最新一条微博的视频url；若该微博没有视频，则值为’’；<br><br><strong>location</strong>：存储微博的发布位置。如wb.weibo[0][‘location’]为最新一条微博的发布位置，若该条微博没有位置信息，则值为’’；<br><br><strong>created_at</strong>：存储微博的发布时间。如wb.weibo[0][‘created_at’]为最新一条微博的发布时间；<br><br><strong>source</strong>：存储微博的发布工具。如wb.weibo[0][‘source’]为最新一条微博的发布工具；<br><br><strong>attitudes_count</strong>：存储微博获得的点赞数。如wb.weibo[0][‘attitudes_count’]为最新一条微博获得的点赞数；<br><br><strong>comments_count</strong>：存储微博获得的评论数。如wb.weibo[0][‘comments_count’]为最新一条微博获得的评论数；<br><br><strong>reposts_count</strong>：存储微博获得的转发数。如wb.weibo[0][‘reposts_count’]为最新一条微博获得的转发数；<br><br><strong>topics</strong>：存储微博话题，即两个#中的内容。如wb.weibo[0][‘topics’]为最新一条微博的话题，若该条微博没有话题信息，则值为’’；<br><br><strong>at_users</strong>：存储微博@的用户。如wb.weibo[0][‘at_users’]为最新一条微博@的用户，若该条微博没有@的用户，则值为’’；<br><br><strong>retweet</strong>：存储转发微博中原始微博的全部信息。假如wb.weibo[0]为转发微博，则wb.weibo[0][‘retweet’]为该转发微博的原始微博，它存储的属性与wb.weibo[0]一样，只是没有retweet属性;若该条微博为原创微博，则wb[0]没有”retweet”属性，大家可以点击”详情”查看具体用法。<br></p> <details> <summary>详情</summary> <p>假设爬取到的第i条微博为转发微博，则它存在以下信息：<br><br><strong>user_id</strong>：存储原始微博用户id。wb.weibo[i-1][‘retweet’][‘user_id’]为该原始微博的用户id；<br><br><strong>screen_name</strong>：存储原始微博昵称。wb.weibo[i-1][‘retweet’][‘screen_name’]为该原始微博的昵称；<br><br><strong>id</strong>：存储原始微博id。wb.weibo[i-1][‘retweet’][‘id’]为该原始微博的id；<br><br><strong>text</strong>：存储原始微博正文。wb.weibo[i-1][‘retweet’][‘text’]为该原始微博的正文；<br><br><strong>pics</strong>：存储原始微博的原始图片url。wb.weibo[i-1][‘retweet’][‘pics’]为该原始微博的原始图片url，若该原始微博有多张图片，则存储多个url，以英文逗号分割；若该原始微博没有图片，则值为’’；<br><br><strong>video_url</strong>：存储原始微博的视频url。如wb.weibo[i-1][‘retweet’][‘video_url’]为该原始微博的视频url；若该微博没有视频，则值为’’；<br><br><strong>location</strong>：存储原始微博的发布位置。wb.weibo[i-1][‘retweet’][‘location’]为该原始微博的发布位置，若该原始微博没有位置信息，则值为’’；<br><br><strong>created_at</strong>：存储原始微博的发布时间。wb.weibo[i-1][‘retweet’][‘created_at’]为该原始微博的发布时间；<br><br><strong>source</strong>：存储原始微博的发布工具。wb.weibo[i-1][‘retweet’][‘source’]为该原始微博的发布工具；<br><br><strong>attitudes_count</strong>：存储原始微博获得的点赞数。wb.weibo[i-1][‘retweet’][‘attitudes_count’]为该原始微博获得的点赞数；<br><br><strong>comments_count</strong>：存储原始微博获得的评论数。wb.weibo[i-1][‘retweet’][‘comments_count’]为该原始微博获得的评论数；<br><br><strong>reposts_count</strong>：存储原始微博获得的转发数。wb.weibo[i-1][‘retweet’][‘reposts_count’]为该原始微博获得的转发数；<br><br><strong>topics</strong>：存储原始微博话题，即两个#中的内容。wb.weibo[i-1][‘retweet’][‘topics’]为该原始微博的话题，若该原始微博没有话题信息，则值为’’；<br><br><strong>at_users</strong>：存储原始微博@的用户。wb.weibo[i-1][‘retweet’][‘at_users’]为该原始微博@的用户，若该原始微博没有@的用户，则值为’’。<br></p> </details> </details> <h2 id="如何获取user-id"><a href="#如何获取user-id" class="headerlink" title="如何获取user_id"></a>如何获取user_id</h2><p>1.打开网址<a href="https://weibo.cn" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn</a>，搜索我们要找的人，如”迪丽热巴”，进入她的主页；<br><br><img src="/img/loading.png" data-original="https://picture.cognize.me/cognize/github/weibospider/user_home.png" alt><br>2.按照上图箭头所指，点击”资料”链接，跳转到用户资料页面；<br><br><img src="/img/loading.png" data-original="https://picture.cognize.me/cognize/github/weibospider/user_info.png" alt><br>如上图所示，迪丽热巴微博资料页的地址为”<a href="https://weibo.cn/1669879400/info" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn/1669879400/info</a>“，其中的”1669879400”即为此微博的user_id。<br><br>事实上，此微博的user_id也包含在用户主页(<a href="https://weibo.cn/u/1669879400?f=search_0" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn/u/1669879400?f=search_0</a>)中，之所以我们还要点击主页中的”资料”来获取user_id，是因为很多用户的主页不是”<a href="https://weibo.cn/user_id?f=search_0" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn/user_id?f=search_0</a>“的形式，而是”<a href="https://weibo.cn/个性域名?f=search_0" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn/个性域名?f=search_0</a>“或”<a href="https://weibo.cn/微号?f=search_0" rel="external nofollow noopener noreferrer" target="_blank">https://weibo.cn/微号?f=search_0</a>“的形式。其中”微号”和user_id都是一串数字，如果仅仅通过主页地址提取user_id，很容易将”微号”误认为user_id。</p> <div class="hidden-xs col-xs-12 text-center"> <canvas id="geektutu-post-qr"></canvas> <p style="margin-top:-10px"><small>微信扫一扫，阅读/分享</small></p> </div> <script src="/js/qrious.min.js"></script> <script>new QRious({element:document.getElementById("geektutu-post-qr"),value:window.location.href,size:120});</script> <hr> <div> <p> <span>标签: </span> <a href="/tags/#Python"> <code style="color:#333" key="Python" class="post-label">#Python</code> </a> <a href="/tags/#微博爬虫"> <code style="color:#333" key="微博爬虫" class="post-label">#微博爬虫</code> </a> </p> <p> <span>发表于2016-03-26 22:54:01，最后修改于2019-08-15 22:56:13。</span> </p> <p><span>本站文章欢迎链接分享，禁止全文转载。</span></p> </div> <hr> <p name="pagination"> <a class="float-left" href="/matplotlibZn/">« 上一篇 解决matplotlib中文显示问题</a> <a class="float-right" href="/djangopic/">下一篇 » Django上传并显示图片</a> </p> </article> <div style="margin-top:20px"> <h3>推荐阅读</h3> <div class="post-preview"> <div class="post-img" style="background-image:url(/img/header/r.png)"></div> <div class="post-info"> <div class="post-info-center"> <div class="hidden-xs"> <span>/</span> <a class="text-gray" href="/tags/#R" title="R">R</a> <span>/</span> </div> <a href="/rLayout/" class="title"> R语言layout函数学习笔记 </a> <p class="text-gray"> <small> <span>发表于2014-11-15，</span> <span class="hidden-xs">全文1196字，</span> <span>阅读约2分钟</span> </small> </p> </div> </div> </div> <div class="post-preview"> <div class="post-img" style="background-image:url(/img/header/hexo.png)"></div> <div class="post-info"> <div class="post-info-center"> <div class="hidden-xs"> <span>/</span> <a class="text-gray" href="/tags/#hexo" title="hexo">hexo</a> <span>/</span> </div> <a href="/hexoComment/" class="title"> hexo禁用特定文章的评论（论做笔记的重要性） </a> <p class="text-gray"> <small> <span>发表于2014-11-06，</span> <span class="hidden-xs">全文538字，</span> <span>阅读约1分钟</span> </small> </p> </div> </div> </div> <div class="post-preview"> <div class="post-img" style="background-image:url(/img/header/emacs.png)"></div> <div class="post-info"> <div class="post-info-center"> <div class="hidden-xs"> <span>/</span> <a class="text-gray" href="/tags/#emacs" title="emacs">emacs</a> <span>/</span> </div> <a href="/emacsorg-modeRefiling/" class="title"> emacs之org-mode的转接（Refiling） </a> <p class="text-gray"> <small> <span>发表于2014-09-23，</span> <span class="hidden-xs">全文2822字，</span> <span>阅读约5分钟</span> </small> </p> </div> </div> </div> </div> <div style="margin:20px 0"> <style>#featured-tag .post-tag-item{font-size:12px;line-height:30px;display:inline-block;height:30px;margin:5px 0;padding:0 7px;color:#333;border-radius:15px;background:#f6f6f6}#featured-tag .post-tag-item:hover{color:#108ee9}</style> <div id="featured-tag"> <a class="post-tag-item" href="/tags/#C#" title="C#" rel="8">#C# (8) </a> <a class="post-tag-item" href="/tags/#转载" title="转载" rel="13">#转载 (13) </a> <a class="post-tag-item" href="/tags/#R" title="R" rel="24">#R (24) </a> <a class="post-tag-item" href="/tags/#算法" title="算法" rel="1">#算法 (1) </a> <a class="post-tag-item" href="/tags/#博客" title="博客" rel="1">#博客 (1) </a> <a class="post-tag-item" href="/tags/#Django" title="Django" rel="1">#Django (1) </a> <a class="post-tag-item" href="/tags/#dns" title="dns" rel="1">#dns (1) </a> <a class="post-tag-item" href="/tags/#kindle" title="kindle" rel="1">#kindle (1) </a> <a class="post-tag-item" href="/tags/#emacs" title="emacs" rel="13">#emacs (13) </a> <a class="post-tag-item" href="/tags/#eclipse" title="eclipse" rel="1">#eclipse (1) </a> <a class="post-tag-item" href="/tags/#域名" title="域名" rel="1">#域名 (1) </a> <a class="post-tag-item" href="/tags/#Godaddy" title="Godaddy" rel="1">#Godaddy (1) </a> <a class="post-tag-item" href="/tags/#hexo" title="hexo" rel="6">#hexo (6) </a> <a class="post-tag-item" href="/tags/#手机" title="手机" rel="1">#手机 (1) </a> <a class="post-tag-item" href="/tags/#html" title="html" rel="1">#html (1) </a> <a class="post-tag-item" href="/tags/#linux" title="linux" rel="6">#linux (6) </a> <a class="post-tag-item" href="/tags/#vim" title="vim" rel="3">#vim (3) </a> <a class="post-tag-item" href="/tags/#Python" title="Python" rel="2">#Python (2) </a> <a class="post-tag-item" href="/tags/#matplotlib" title="matplotlib" rel="1">#matplotlib (1) </a> <a class="post-tag-item" href="/tags/#vs2010" title="vs2010" rel="1">#vs2010 (1) </a> <a class="post-tag-item" href="/tags/#music" title="music" rel="1">#music (1) </a> <a class="post-tag-item" href="/tags/#数学" title="数学" rel="1">#数学 (1) </a> <a class="post-tag-item" href="/tags/#RStudio" title="RStudio" rel="1">#RStudio (1) </a> <a class="post-tag-item" href="/tags/#Amazon EC2" title="Amazon EC2" rel="1">#Amazon EC2 (1) </a> <a class="post-tag-item" href="/tags/#图床" title="图床" rel="2">#图床 (2) </a> <a class="post-tag-item" href="/tags/#WindowsService" title="WindowsService" rel="1">#WindowsService (1) </a> <a class="post-tag-item" href="/tags/#微博爬虫" title="微博爬虫" rel="1">#微博爬虫 (1) </a> </div> </div> <div style="overflow:hidden"> </div> <div id="gitalk-container"></div> <link rel="stylesheet" href="/css/gitalk.css"> <script src="/js/gitalk.min.js"></script> <script>window.addEventListener("load",function(){new Gitalk({clientID:"b2fc4981950e4e35e55d",clientSecret:"6a15521362667440fb817cd6d553a1c5b5624688",repo:"blog-comment",owner:"dataabc",admin:["dataabc"],id:window.location.pathname,distractionFreeMode:!1}).render("gitalk-container"),document.querySelector("#gitalk-container").addEventListener("click",function(e){e&&e.stopPropagation&&e.stopPropagation()})});</script> </div> <aside class="sidebar sidebar-right hidden-md hidden-xs hidden-sm"> <div></div> <div class="sidebar-wrapper"> <section> <h3>目录</h3> <div id="sidebar-toc"> <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#功能"><span class="toc-nav-text">功能</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#输入"><span class="toc-nav-text">输入</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#输出"><span class="toc-nav-text">输出</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#运行环境"><span class="toc-nav-text">运行环境</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#使用说明"><span class="toc-nav-text">使用说明</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-下载脚本"><span class="toc-nav-text">1.下载脚本</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-设置user-id"><span class="toc-nav-text">2.设置user_id</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-安装依赖"><span class="toc-nav-text">3.安装依赖</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-运行脚本"><span class="toc-nav-text">4.运行脚本</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-按需求修改脚本（可选）"><span class="toc-nav-text">5.按需求修改脚本（可选）</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#如何获取user-id"><span class="toc-nav-text">如何获取user_id</span></a></li></ol> </div> <script>!function(){var e=document.querySelectorAll("article h2"),t=(document.querySelectorAll("article h3"),document.querySelectorAll("#sidebar-toc a"));function o(e){for(var o=0;o<t.length;o++){var r=t[o].href.split("#");if(r&&r[r.length-1]===encodeURIComponent(e))return o}return-1}window.addEventListener("scroll",function(r){[].slice.call(t).forEach(function(e){e.classList.remove("sidebar-active")}),function(e){for(var r=document.documentElement.scrollTop||document.body.scrollTop,c=e.length-1;0<=c;c--)if(0<r-e[c].offsetTop){var n=o(e[c].id);-1!=n&&t[n].classList.add("sidebar-active");break}}(e)})}();</script></section> </div> </aside> <script>[].slice.call(document.querySelectorAll(".sidebar .sidebar-wrapper")).forEach(function(e,o){var d=0;window.addEventListener("scroll",function(r){var s=document.documentElement.scrollTop||document.body.scrollTop,c=d<s,i=getPosition(e).y-s,l=0==o?-100:40;c&&i<=(0==o?-50:40)&&e.classList.add("sidebar-fixed"),!c&&l<i&&e.classList.remove("sidebar-fixed"),d=s})});</script> </main> </div> <style>img#go-top{position:fixed;bottom:100px;width:50px;cursor:pointer}</style> <img id="go-top" src="/icon/top.png" class="hidden-xs" style="display:none"> <script>!function(){var e=document.getElementById("go-top"),t=document.querySelector(".main-container");e.addEventListener("click",function(){window.scroll(0,0)},!1),window.addEventListener("scroll",function(){var n=document.body.offsetWidth-t.getBoundingClientRect().right,o=document.documentElement.scrollTop||document.body.scrollTop;e.style.right=n+10+"px",700<o&&(e.style.display="block"),o<=700&&(e.style.display="none")})}();</script> <style>#geektutu-click-img-container{position:fixed;left:0;top:0;text-align:center;width:100%;display:none;z-index:9999}#geektutu-click-img-container img{object-fit:contain;background:#eaecef;padding:15px;border-radius:10px;height:auto;width:auto;vertical-align:middle}</style> <div id="geektutu-click-img-container"> <img src alt="Big Image"> </div> <script>!function(){var t=document.querySelector("#geektutu-click-img-container"),i=t.querySelector("img"),e=document.querySelectorAll("article img");i.addEventListener("click",function(i){t.style.display="none",i&&i.stopPropagation&&i.stopPropagation()},!1);for(var n=0;n<e.length;++n){var o=e[n];o.addEventListener("click",function(e,n){return function(o){o&&o.stopPropagation&&o.stopPropagation(),window.innerWidth<980||(i.style.height=i.style.width="auto",window.innerWidth/window.innerHeight>n?i.style.height=window.innerHeight-20+"px":i.style.width=window.innerWidth-20+"px",t.style.height=window.innerHeight+"px",t.style.lineHeight=window.innerHeight+"px",t.style.display="block",i.src=e)}}(o.dataset.original,o.width/o.height),!1)}}();</script> <style>footer{width:100%;line-height:1.5;padding:20px}footer a{color:#333;text-decoration:none;margin:0 7px 7px 0;display:inline-block}.footer-hexo img{height:20px;margin-bottom:-5px}.footer-hexo a{color:#108ee9}</style> <footer class="text-center col-xs-12"> <p> <small>© 2020 - Chilly - </small> <small> <a target="_blank" rel="external nofollow noopener noreferrer" href="http://www.beian.miit.gov.cn">鲁ICP备17040584号-1</a> </small> </p> <p> <small> <a target="_blank" href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=37012402000137" style="display:inline-block;text-decoration:none;height:20px;line-height:20px" rel="external nofollow noopener noreferrer"> 鲁公网安备37012402000137号 </a> </small> </p> <p class="footer-hexo"> <small>Powered by <a target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> | Theme <a target="_blank" href="https://github.com/geektutu/hexo-theme-geektutu" rel="external nofollow noopener noreferrer">Geektutu</a> </small> </p> </footer> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-106464683-12"),window.addEventListener("load",function(){globalAddScript("https://www.googletagmanager.com/gtag/js?id=UA-106464683-12")});</script> <script>!function(){var e=function(e){e&&e.stopPropagation&&e.stopPropagation()},t=document.querySelectorAll("a");[].slice.call(t).forEach(function(t){t.href&&-1===t.href.indexOf(window.location.host)&&(t.target="_blank"),t.addEventListener("click",e,!1)});var n=document.querySelector("article");n&&n.addEventListener("click",e,!1)}();</script> <script>"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js?t=1601984411143").then(function(){console.log("ServiceWorker Register Successfully.")}).catch(function(e){console.error(e)});</script><script>window.imageLazyLoadSetting={isSPA:!1,processImages:null};</script><script>window.addEventListener("load",function(){var a=/\.(gif|jpg|jpeg|tiff|png)$/i,e=/^data:image\/[a-z]+;base64,/;Array.prototype.slice.call(document.querySelectorAll("img[data-original]")).forEach(function(t){var r=t.parentNode;"A"===r.tagName&&(r.href.match(a)||r.href.match(e))&&(r.href=t.dataset.original)})});</script><script>!function(t){t.imageLazyLoadSetting.processImages=i;var e=t.imageLazyLoadSetting.isSPA,n=Array.prototype.slice.call(document.querySelectorAll("img[data-original]"));function i(){e&&(n=Array.prototype.slice.call(document.querySelectorAll("img[data-original]")));for(var i,o=0;o<n.length;o++)0<=(i=(i=n[o]).getBoundingClientRect()).bottom&&0<=i.left&&i.top<=(t.innerHeight||document.documentElement.clientHeight)&&function(){var t,e,i,a,r=n[o];t=r,e=function(){n=n.filter(function(t){return r!==t})},i=new Image,a=t.getAttribute("data-original"),i.onload=function(){t.src=a,e()},i.src=a}()}i(),t.addEventListener("scroll",function(){var e,n;e=i,n=t,clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(n)},500)})}(this);</script></body> </html>